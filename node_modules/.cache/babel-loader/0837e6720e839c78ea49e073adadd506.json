{"ast":null,"code":"import _objectSpread from \"D:\\\\jambo\\\\UDB\\\\2020\\\\Ciclo 02\\\\Alumno\\\\DPS\\\\laboratorios\\\\Tercer Taller\\\\NuevoLogin\\\\desafio3practicodps\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDklqeknBwWWoUQdZDNMvxoJTYaa9hj95M\",\n  authDomain: \"notasestudiates.firebaseapp.com\",\n  databaseURL: \"https://notasestudiates.firebaseio.com\",\n  projectId: \"notasestudiates\",\n  storageBucket: \"notasestudiates.appspot.com\",\n  messagingSenderId: \"4359422220\",\n  appId: \"1:4359422220:web:5dfee0e7c31d25745cc929\"\n};\n/*\r\nvar firebaseConfig = {\r\napiKey: \"AIzaSyD5Zgp6ev7WbL_I_cSVKP7KzvDixdlc04I\",\r\nauthDomain: \"taller3-c8a96.firebaseapp.com\",\r\ndatabaseURL: \"https://taller3-c8a96.firebaseio.com\",\r\nprojectId: \"taller3-c8a96\",\r\nstorageBucket: \"taller3-c8a96.appspot.com\",\r\nmessagingSenderId: \"621103704772\",\r\nappId: \"1:621103704772:web:487baf885c412a87327791\"\r\n};*/\n// Initialize Firebase\n\n/* var fireDB=firebase.initializeApp(firebaseConfig);\r\n export default fireDB.database().ref();*/\n// Initialize Firebase\n\nvar fireDB = firebase.initializeApp(firebaseConfig);\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore(); // Representa el proveedor de autenticación de inicio de sesión de Google.\n// Utilice esta clase para obtener\n\nconst provider = new firebase.auth.GoogleAuthProvider(); //Para acceder con una ventana emergente, llama a signInWithPopup\n\nexport const signInWithGoogle = () => {\n  auth.signInWithPopup(provider);\n};\nexport const generateUserDocument = async (user, additionalData) => {\n  if (!user) return; //En algunos casos, puede ser útil crear una referencia de documento con un ID \n  //generado automáticamente y, luego, usar la referencia más adelante. \n  //Para este caso práctico, puedes llamar a doc():\n\n  const userRef = firestore.doc(`users/${user.uid}`); // Para obetner el registro creado\n\n  const snapshot = await userRef.get();\n\n  if (!snapshot.exists) {\n    const email = user.email,\n          displayName = user.displayName,\n          photoURL = user.photoURL;\n\n    try {\n      // Para crear o reemplazar un solo documento, usa el método set()\n      await userRef.set(_objectSpread({\n        displayName,\n        email,\n        photoURL\n      }, additionalData));\n    } catch (error) {\n      console.error(\"Error crear el usuario\", error);\n    }\n  }\n\n  return getUserDocument(user.uid);\n}; // getUserDocument , consulta un registro por medio del id\n\nconst getUserDocument = async uid => {\n  if (!uid) return null;\n\n  try {\n    const userDocument = await firestore.doc(`users/${uid}`).get();\n    return _objectSpread({\n      uid\n    }, userDocument.data());\n  } catch (error) {\n    console.error(\"Error extraer usuario\", error);\n  }\n};","map":{"version":3,"sources":["D:/jambo/UDB/2020/Ciclo 02/Alumno/DPS/laboratorios/Tercer Taller/NuevoLogin/desafio3practicodps/src/firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","fireDB","initializeApp","auth","firestore","provider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","generateUserDocument","user","additionalData","userRef","doc","uid","snapshot","get","exists","email","displayName","photoURL","set","error","console","getUserDocument","userDocument","data"],"mappings":";AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAO,oBAAP;AAEA,MAAMC,cAAc,GAAG;AACrBC,EAAAA,MAAM,EAAE,yCADa;AAErBC,EAAAA,UAAU,EAAE,iCAFS;AAGrBC,EAAAA,WAAW,EAAE,wCAHQ;AAIrBC,EAAAA,SAAS,EAAE,iBAJU;AAKrBC,EAAAA,aAAa,EAAE,6BALM;AAMrBC,EAAAA,iBAAiB,EAAE,YANE;AAOrBC,EAAAA,KAAK,EAAE;AAPc,CAAvB;AAQE;;;;;;;;;;AAWA;;AACD;;AAGD;;AACA,IAAIC,MAAM,GAAGT,QAAQ,CAACU,aAAT,CAAuBT,cAAvB,CAAb;AACA,OAAO,MAAMU,IAAI,GAAGX,QAAQ,CAACW,IAAT,EAAb;AACP,OAAO,MAAMC,SAAS,GAAGZ,QAAQ,CAACY,SAAT,EAAlB,C,CAEP;AACA;;AACA,MAAMC,QAAQ,GAAG,IAAIb,QAAQ,CAACW,IAAT,CAAcG,kBAAlB,EAAjB,C,CAEA;;AACA,OAAO,MAAMC,gBAAgB,GAAG,MAAM;AACpCJ,EAAAA,IAAI,CAACK,eAAL,CAAqBH,QAArB;AACD,CAFM;AAIP,OAAO,MAAMI,oBAAoB,GAAG,OAAOC,IAAP,EAAaC,cAAb,KAAgC;AAClE,MAAI,CAACD,IAAL,EAAW,OADuD,CAElE;AACA;AACA;;AACA,QAAME,OAAO,GAAGR,SAAS,CAACS,GAAV,CAAe,SAAQH,IAAI,CAACI,GAAI,EAAhC,CAAhB,CALkE,CAOlE;;AACA,QAAMC,QAAQ,GAAG,MAAMH,OAAO,CAACI,GAAR,EAAvB;;AAEA,MAAI,CAACD,QAAQ,CAACE,MAAd,EAAsB;AAAA,UACZC,KADY,GACqBR,IADrB,CACZQ,KADY;AAAA,UACLC,WADK,GACqBT,IADrB,CACLS,WADK;AAAA,UACQC,QADR,GACqBV,IADrB,CACQU,QADR;;AAEpB,QAAI;AACF;AACA,YAAMR,OAAO,CAACS,GAAR;AACJF,QAAAA,WADI;AAEJD,QAAAA,KAFI;AAGJE,QAAAA;AAHI,SAIDT,cAJC,EAAN;AAMD,KARD,CAQE,OAAOW,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAc,wBAAd,EAAwCA,KAAxC;AACD;AACF;;AACD,SAAOE,eAAe,CAACd,IAAI,CAACI,GAAN,CAAtB;AACD,CAzBM,C,CA2BP;;AACA,MAAMU,eAAe,GAAG,MAAMV,GAAN,IAAa;AACnC,MAAI,CAACA,GAAL,EAAU,OAAO,IAAP;;AACV,MAAI;AACF,UAAMW,YAAY,GAAG,MAAMrB,SAAS,CAACS,GAAV,CAAe,SAAQC,GAAI,EAA3B,EAA8BE,GAA9B,EAA3B;AACA;AACEF,MAAAA;AADF,OAEKW,YAAY,CAACC,IAAb,EAFL;AAID,GAND,CAME,OAAOJ,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAc,uBAAd,EAAuCA,KAAvC;AACD;AACF,CAXD","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDklqeknBwWWoUQdZDNMvxoJTYaa9hj95M\",\r\n  authDomain: \"notasestudiates.firebaseapp.com\",\r\n  databaseURL: \"https://notasestudiates.firebaseio.com\",\r\n  projectId: \"notasestudiates\",\r\n  storageBucket: \"notasestudiates.appspot.com\",\r\n  messagingSenderId: \"4359422220\",\r\n  appId: \"1:4359422220:web:5dfee0e7c31d25745cc929\"\r\n};/*\r\nvar firebaseConfig = {\r\n  apiKey: \"AIzaSyD5Zgp6ev7WbL_I_cSVKP7KzvDixdlc04I\",\r\n  authDomain: \"taller3-c8a96.firebaseapp.com\",\r\n  databaseURL: \"https://taller3-c8a96.firebaseio.com\",\r\n  projectId: \"taller3-c8a96\",\r\n  storageBucket: \"taller3-c8a96.appspot.com\",\r\n  messagingSenderId: \"621103704772\",\r\n  appId: \"1:621103704772:web:487baf885c412a87327791\"\r\n};*/\r\n\r\n  // Initialize Firebase\r\n /* var fireDB=firebase.initializeApp(firebaseConfig);\r\n  export default fireDB.database().ref();*/\r\n\r\n// Initialize Firebase\r\nvar fireDB = firebase.initializeApp(firebaseConfig);\r\nexport const auth = firebase.auth();\r\nexport const firestore = firebase.firestore();\r\n\r\n// Representa el proveedor de autenticación de inicio de sesión de Google.\r\n// Utilice esta clase para obtener\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\n\r\n//Para acceder con una ventana emergente, llama a signInWithPopup\r\nexport const signInWithGoogle = () => {\r\n  auth.signInWithPopup(provider);\r\n};\r\n\r\nexport const generateUserDocument = async (user, additionalData) => {\r\n  if (!user) return;\r\n  //En algunos casos, puede ser útil crear una referencia de documento con un ID \r\n  //generado automáticamente y, luego, usar la referencia más adelante. \r\n  //Para este caso práctico, puedes llamar a doc():\r\n  const userRef = firestore.doc(`users/${user.uid}`);\r\n\r\n  // Para obetner el registro creado\r\n  const snapshot = await userRef.get();\r\n\r\n  if (!snapshot.exists) {\r\n    const { email, displayName, photoURL } = user;\r\n    try {\r\n      // Para crear o reemplazar un solo documento, usa el método set()\r\n      await userRef.set({\r\n        displayName,\r\n        email,\r\n        photoURL,\r\n        ...additionalData\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error crear el usuario\", error);\r\n    }\r\n  }\r\n  return getUserDocument(user.uid);\r\n};\r\n\r\n// getUserDocument , consulta un registro por medio del id\r\nconst getUserDocument = async uid => {\r\n  if (!uid) return null;\r\n  try {\r\n    const userDocument = await firestore.doc(`users/${uid}`).get();\r\n    return {\r\n      uid,\r\n      ...userDocument.data()\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Error extraer usuario\", error);\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}